### Руководство по прошивке nRF52

*Оригинальная документация:* [https://meshtastic.org/docs/getting-started/flashing-firmware/nrf52/](https://meshtastic.org/docs/getting-started/flashing-firmware/nrf52/)

**Методы прошивки для устройств nRF52 и RP2040**

Устройства на базе nRF52 и RP2040 имеют самый простой процесс обновления прошивки. Не требуется установка драйверов или программного обеспечения на любой платформе.
> Только первая прошивка может потребовать дополнительных шагов с зависимости от вашего оборудования.

**Метод Drag & Drop**

Устройства nRF52 и RP2040 используют метод установки Drag & Drop для установки прошивок. Это значит:
1. подключить устройство к компьютеру и перевести в DFU режим (из приложения, двойным нажатием кнопки RST или другим способом)
   - на компьютере определится новый диск
2. скачать и скопировать файл с прошивкой .uf2 на ваше устройство
   -  после окончания копирования устройство перезагрузится автоатически и начнет работать
   -  компьютер может сообщить о некорректном отключении устройства - это нормально

Этот способ работает так же мобильных устройствах.

**Обновление по воздуху (OTA)**

Устройства nRF52 могут принимать обновления прошивки по воздуху с мобильного устройства через Bluetooth.

Для прошивки потребуется OTA файл и приложение с поддержкой ota прошивки nRF52 устройств, например nRF Connect или DFU на Android. Приложение Meshtastic на Android (начиная с версии v2.7.8) так же поддерживает ota прошивку.

- Прошивка по воздуху имеет несколько особенностей
  - Это достаточно медленный процесс
  - Прошивка может пройти неуспешно по разным причинам. В ряде случаев придется продолжить прошивку обычным Drag & Drop методом. Кастомный bootloader может помочь избежать часть неудачных сценариев.

**Сброс до заводских настроек nRF52 и RP2040**

Вы можете выполнить сброс до заводских настроек перед установкой прошивки, чтобы очистить данные, которые могут изменить формат и расположение между выпусками. Для этого требуется прошить специальный файл методом Drag & Drop и подтвердить очистку через консоль.

**Первая прошивка**

Первая прошивка может быть неуспешной. Основная причина - старая версия bootloader на устройстве.

Например, платы NRF52840 ProMicro почти всегда идут с завода с старой версией bootloader (0.6.2).
> проверить версию загрузчика можно пучем перевода устройства в DFU режим и чтения текстового файла на подклчюенном диске.

В этом случае необходимо скачать и прошить методом Drag & Drop обновленный bootloader для вашего устройства из репозитория [Adafruit](https://github.com/adafruit/Adafruit_nRF52_Bootloader/releases) или кастомный [Adafruit_nRF52_Bootloader_OTAFIX](https://github.com/oltaco/Adafruit_nRF52_Bootloader_OTAFIX/releases)
> например, update-nice_nano_bootloader-0.9.2_nosd.uf2 для Promicro

**Прошивка через SWDIO**

Если на вашем устройстве на прошит bootloaderб поддерживающий DFU и устройство не может прошиваться через D&D или OTA, другим вариантом может быть прошивка через SWDIO. 